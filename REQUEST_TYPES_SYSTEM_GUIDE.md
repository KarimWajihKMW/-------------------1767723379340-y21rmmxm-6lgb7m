# ๐ ูุธุงู ุฅุฏุงุฑุฉ ุฃููุงุน ุงูุทูุจุงุช - ุฏููู ุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฏููุงูููู ูุฅุฏุงุฑุฉ ุฃููุงุน ุงูุทูุจุงุช ูู ูุธุงู ูุงููุดุ ูุณูุญ ูููุณุคูููู ุจุฅุถุงูุฉ ูุชุนุฏูู ูุฅุฏุงุฑุฉ ุฃููุงุน ุงูุทูุจุงุช ุงููุฎุชููุฉ ุจุณูููุฉ ุฏูู ุงูุญุงุฌุฉ ูุชุนุฏูู ุงูููุฏ.

## โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุฏููุงููููุฉ ููุฃููุงุน
- โ ุฅุถุงูุฉ ุฃููุงุน ุทูุจุงุช ุฌุฏูุฏุฉ ูู ุงููุงุฌูุฉ
- โ ุชุนุฏูู ุงูุฃููุงุน ุงูููุฌูุฏุฉ
- โ ุชูุนูู/ุชุนุทูู ุงูุฃููุงุน
- โ ุญุฐู ุงูุฃููุงุน ุบูุฑ ุงููุณุชุฎุฏูุฉ

### 2. ุชุฎุตูุต ูุชูุฏู
- ๐จ ุฃููุงู ูุฎุตุตุฉ ููู ููุน
- ๐ฏ ุฃููููุงุช emoji ุฃู Font Awesome
- ๐ ุชุตููู ุญุณุจ ุงููุฆุงุช
- ๐ข ุชุฑุชูุจ ูุฎุตุต ููุนุฑุถ

### 3. ูุธุงู ููุงููุงุช ูุฑู
- โ๏ธ ุชุญุฏูุฏ ูุณุชููุงุช ุงูููุงููุฉ (1-5)
- ๐ ููุงููุฉ ุงููุฏูุฑ ุงููุจุงุดุฑ
- ๐ฅ ููุงููุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ
- โ ููุงููุงุช ูุชุนุฏุฏุฉ ุงููุณุชููุงุช

### 4. ุฅุญุตุงุฆูุงุช ููุฑูุฉ
- ๐ ุฅุฌูุงูู ุงูุฃููุงุน
- โ ุงูุฃููุงุน ุงููุดุทุฉ
- โธ๏ธ ุงูุฃููุงุน ุบูุฑ ุงููุดุทุฉ
- ๐๏ธ ุนุฏุฏ ุงููุฆุงุช

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `request_types`

```sql
CREATE TABLE request_types (
    id SERIAL PRIMARY KEY,
    type_code VARCHAR(100) UNIQUE NOT NULL,  -- ููุฏ ูุฑูุฏ
    type_name_ar VARCHAR(255) NOT NULL,       -- ุงูุงุณู ุจุงูุนุฑุจูุฉ
    type_name_en VARCHAR(255),                 -- ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ
    description_ar TEXT,                       -- ุงููุตู
    icon VARCHAR(100),                         -- ุงูุฃููููุฉ
    color VARCHAR(50) DEFAULT '#ffffff',       -- ุงูููู
    category VARCHAR(100),                     -- ุงููุฆุฉ
    is_active BOOLEAN DEFAULT TRUE,            -- ูุดุท/ุบูุฑ ูุดุท
    requires_approval BOOLEAN DEFAULT TRUE,
    requires_manager_approval BOOLEAN DEFAULT FALSE,
    requires_hr_approval BOOLEAN DEFAULT FALSE,
    approval_levels INTEGER DEFAULT 1,
    form_fields JSONB,                         -- ุญููู ุงููููุฐุฌ
    display_order INTEGER DEFAULT 0,
    created_by VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### ุงูุฃููุงุน ุงูุงูุชุฑุงุถูุฉ (18 ููุน)

| ุงูุฑูุฒ | ุงูุงุณู | ุงููุฆุฉ | ุงูุฃููููุฉ |
|------|------|------|----------|
| work_request | ุทูุจ ุนูู | general | ๐ผ |
| return_request | ุทูุจ ุนูุฏุฉ | hr | ๐ |
| graduation_certificate | ุทูุจ ุฅุซุจุงุช ุงูุชุฎุฑุฌ | admin | ๐ |
| flight_request | ุทูุจ ุฑุญูุฉ | travel | โ๏ธ |
| salary_file | ุทูุจ ุชุนุฑูู ุจุงูุฑุงุชุจ | hr | ๐ต |
| student_transfer | ุทูุจ ุชุญููู ุทุงูุจ | admin | ๐ฅ |
| change_request | ุทูุจ ุชุบููุฑ | admin | โ๏ธ |
| vacation_request | ุทูุจ ุฅุฌุงุฒุฉ | hr | ๐๏ธ |
| flights_booking | ุทูุจ ุญุฌุฒ ุฑุญูุงุช | travel | ๐ซ |
| course_request | ุทูุจ ุฏูุฑุฉ | training | ๐ |
| certificate_request | ุทูุจ ุดูุงุฏุฉ | admin | ๐ |
| purchase_request | ุทูุจ ูุดุชุฑูุงุช | procurement | ๐ |
| private_doctor | ุทูุจ ุญุฌุฒ ุทุจูุจ ุฎุตูุตู | health | ๐ |
| excuse_request | ุทูุจ ุงุณุชุฆุฐุงู | hr | ๐ |
| loan_request | ุทูุจ ูุฑุถ | financial | ๐ฐ |
| gift_voucher | ุทูุจ ูุณููุฉ ูุฏูุฉ | hr | ๐ |
| renewal_request | ุทูุจ ุชุฌุฏูุฏ | admin | ๐ |
| training_session | ุทูุจ ุฌูุณุฉ ุชุฏุฑูุจ | training | ๐ |

## ๐ API Endpoints

### 1. ุฌูุจ ุฌููุน ุงูุฃููุงุน
```http
GET /api/request-types
```

**Query Parameters:**
- `is_active` (boolean): ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ
- `category` (string): ุชุตููุฉ ุญุณุจ ุงููุฆุฉ

**ูุซุงู:**
```javascript
fetch('/api/request-types?is_active=true&category=hr')
```

**Response:**
```json
[
  {
    "id": 1,
    "type_code": "vacation_request",
    "type_name_ar": "ุทูุจ ุฅุฌุงุฒุฉ",
    "type_name_en": "Vacation Request",
    "icon": "๐๏ธ",
    "color": "#e8f5e9",
    "category": "hr",
    "is_active": true,
    "requires_approval": true,
    "approval_levels": 1,
    "display_order": 8
  }
]
```

### 2. ุฌูุจ ููุน ูุญุฏุฏ
```http
GET /api/request-types/:id
```

### 3. ุฅุถุงูุฉ ููุน ุฌุฏูุฏ
```http
POST /api/request-types
```

**Body:**
```json
{
  "type_code": "custom_request",
  "type_name_ar": "ุทูุจ ูุฎุตุต",
  "type_name_en": "Custom Request",
  "description_ar": "ูุตู ุงูุทูุจ",
  "icon": "๐",
  "color": "#f5f5f5",
  "category": "general",
  "is_active": true,
  "requires_approval": true,
  "approval_levels": 2,
  "display_order": 20
}
```

### 4. ุชุนุฏูู ููุน
```http
PUT /api/request-types/:id
```

### 5. ุญุฐู ููุน
```http
DELETE /api/request-types/:id
```

### 6. ุชุจุฏูู ุญุงูุฉ ุงููุดุงุท
```http
PATCH /api/request-types/:id/toggle-active
```

## ๐ฅ๏ธ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุงููุตูู ูููุงุฌูุฉ
```
http://localhost:3000/manage-request-types.html
```

### ุงูููููุงุช ุงูุฑุฆูุณูุฉ

#### 1. ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช
- ุฅุฌูุงูู ุงูุฃููุงุน
- ุงูุฃููุงุน ุงููุดุทุฉ  
- ุงูุฃููุงุน ุบูุฑ ุงููุดุทุฉ
- ุนุฏุฏ ุงููุฆุงุช

#### 2. ุฃุฏูุงุช ุงูุชุตููุฉ ูุงูุจุญุซ
- ุจุญุซ ูุตู ูู ุงูุงุณู ูุงูููุฏ
- ุชุตููุฉ ุญุณุจ ุงููุฆุฉ
- ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ (ูุดุท/ุบูุฑ ูุดุท)

#### 3. ุดุจูุฉ ุนุฑุถ ุงูุฃููุงุน
- ุนุฑุถ responsive (1-4 ุฃุนูุฏุฉ)
- ุจุทุงูุงุช ููููุฉ ุญุณุจ ูู ููุน
- ูุนูููุงุช ุชูุตูููุฉ
- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช (ุชุนุฏููุ ุชุจุฏููุ ุญุฐู)

#### 4. ูููุฐุฌ ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู
- ุญููู ูุชุนุฏุฏุฉ ููุชุฎุตูุต
- ูุนุงููุฉ ููุฑูุฉ ููุฃููุงู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
# ุฅูุดุงุก ุงูุฌุฏูู
node create-request-types-table.js

# ุงุฎุชุจุงุฑ APIs
node test-request-types.js
```

### ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงููุชููุนุฉ
```
โ ุชู ุฌูุจ 18 ููุน ุทูุจ ุจูุฌุงุญ
โ ุชู ุฅุถุงูุฉ ููุน ุงูุทูุจ ุจูุฌุงุญ
โ ุชู ุชุญุฏูุซ ููุน ุงูุทูุจ ุจูุฌุงุญ
โ ุชู ุชุจุฏูู ุญุงูุฉ ุงููุดุงุท
โ ุชู ุญุฐู ููุน ุงูุทูุจ ุจูุฌุงุญ
โ ุชู ุฌูุจ 5 ููุน ุทูุจ ูู ูุฆุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ
```

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅุถุงูุฉ ููุน ุทูุจ ุฌุฏูุฏ

```javascript
const newType = {
  type_code: 'remote_work_request',
  type_name_ar: 'ุทูุจ ุนูู ุนู ุจุนุฏ',
  type_name_en: 'Remote Work Request',
  description_ar: 'ุทูุจ ุงูุนูู ูู ุงูููุฒู',
  icon: '๐',
  color: '#e3f2fd',
  category: 'hr',
  is_active: true,
  requires_approval: true,
  requires_manager_approval: true,
  approval_levels: 2,
  display_order: 25
};

const response = await fetch('/api/request-types', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(newType)
});
```

### ูุซุงู 2: ุชุนุทูู ููุน ุทูุจ

```javascript
await fetch('/api/request-types/5/toggle-active', {
  method: 'PATCH'
});
```

### ูุซุงู 3: ุฌูุจ ุฃููุงุน ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ุงููุดุทุฉ

```javascript
const response = await fetch('/api/request-types?category=hr&is_active=true');
const hrTypes = await response.json();
```

## ๐ ุงูุฃูุงู

- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุนูู ูุณุชูู ุงูุฎุงุฏู
- โ ุญูุงูุฉ ูู SQL Injection
- โ ููุฏ ูุฑูุฏ ููู ููุน (UNIQUE constraint)
- โ ุชุณุฌูู ุชููุงุฆู ููููุดุฆ ูุงูุชุญุฏูุซุงุช

## ๐ ุงููุดุฑ

### ุงููุชุทูุจุงุช
- โ PostgreSQL 12+
- โ Node.js 14+
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ

### ุฎุทูุงุช ุงููุดุฑ

```bash
# 1. ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
node create-request-types-table.js

# 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
node server.js

# 3. ุงุฎุชุจุงุฑ ุงููุธุงู
node test-request-types.js
```

## ๐ ุฅุญุตุงุฆูุงุช ุงูุฃุฏุงุก

- โก ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ: < 100ms
- ๐ฆ ุญุฌู ุงูุจูุงูุงุช: ~2KB ููู ููุน
- ๐ ูุนุฏู ุงูุชุญุฏูุซ: ููุฑู
- ๐พ ุงุณุชููุงู ุงูุฐุงูุฑุฉ: ููุฎูุถ ุฌุฏุงู

## ๐ ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ

### ุงููุฎุทุท ููุง
- [ ] ุฏุนู ุงููุบุงุช ุงููุชุนุฏุฏุฉ
- [ ] ููุงูุจ ููุงุฐุฌ ูุงุจูุฉ ููุชุฎุตูุต
- [ ] ุชุตุฏูุฑ/ุงุณุชูุฑุงุฏ ุงูุฃููุงุน
- [ ] ุณุฌู ุงูุชุบููุฑุงุช (Audit Log)
- [ ] ุตูุงุญูุงุช ูุชูุฏูุฉ ููุฅุฏุงุฑุฉ
- [ ] ุฅุดุนุงุฑุงุช ุนูุฏ ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ

## ๐ ุงููุดุงูู ุงููุนุฑููุฉ

ูุง ุชูุฌุฏ ูุดุงูู ูุนุฑููุฉ ุญุงููุงู.

## ๐ ุงูุฏุนู

ููุญุตูู ุนูู ุงูุฏุนู:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู
2. ุชุญูู ูู ููู `test-request-types.js`
3. ุฑุงุฌุน ุฃููุงุฏ ุงูุฃุฎุทุงุก ูู ุงูู API

## ๐ ุงูุชุฑุงุฎูุต

ูุฐุง ุงููุธุงู ุฌุฒุก ูู ูุธุงู ูุงููุด ERP ุงูููููู ุจุงููุงูู.

---

**ุขุฎุฑ ุชุญุฏูุซ:** 19 ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.0.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ
