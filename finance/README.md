# ูุธุงู ูุงููุด ุงููุญุงุณุจู ุงููุชูุงูู
# NAIOSH Comprehensive Finance System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุญุงุณุจู ูุชูุงูู ูุตูู ุฎุตูุตุงู ูุดุฑูุฉ ูุงููุด ูุฏุนู:
- 38+ ุญุงุถูุฉ ูููุตุฉ
- ูุธุงู ูุชุนุฏุฏ ุงูููุงูุงุช (Multi-tenant)
- ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุงูู
- ุงูุชูุงูู ูุน ุงููุนุงููุฑ ุงููุญุงุณุจูุฉ ุงูุณุนูุฏูุฉ

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

```
finance/
โโโ api/
โ   โโโ finance-routes.js       # ุฌููุน ุงูู APIs
โโโ database/
โ   โโโ init-finance-system.sql # ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ models/                     # ุงูููุงุฐุฌ (ูุฑูุจุงู)
โโโ test-finance-api.js         # ุงุฎุชุจุงุฑุงุช API
```

## ๐ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ

### 1. ุดุฌุฑุฉ ุงูุญุณุงุจุงุช (Chart of Accounts)
- `finance_accounts` - ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ุจูุณุชููุงุช ูุชุนุฏุฏุฉ
- ุฏุนู ุงูููุงูุงุช ุงููุฎุชููุฉ (HQ, Branch, Incubator, Platform)
- ุชุตููู ูุงูู: ุฃุตููุ ุงูุชุฒุงูุงุชุ ุญููู ููููุฉุ ุฅูุฑุงุฏุงุชุ ูุตุฑููุงุช

### 2. ุงููููุฏ ุงููุญุงุณุจูุฉ (Journal Entries)
- `finance_journal_entries` - ุงููููุฏ ุงูุฑุฆูุณูุฉ
- `finance_journal_lines` - ุณุทูุฑ ุงููููุฏ
- ูููุฏ ุขููุฉ ููุฏููุฉ
- ุญุงูุงุช: DRAFT, POSTED, APPROVED, CANCELLED

### 3. ุงูููุงุชูุฑ ูุงูุนููุงุก (Invoices & Customers)
- `finance_customers` - ุจูุงูุงุช ุงูุนููุงุก ูุน AI Risk Score
- `finance_invoices` - ุงูููุงุชูุฑ
- `finance_invoice_lines` - ุณุทูุฑ ุงูููุงุชูุฑ
- ุฏุนู ุงูุฏูุน ุงูุฌุฒุฆู ูุงูุฃูุณุงุท

### 4. ุงููุฏููุนุงุช (Payments)
- `finance_payments` - ุงููุฏููุนุงุช
- `finance_payment_allocations` - ุฑุจุท ุงููุฏููุนุงุช ุจุงูููุงุชูุฑ
- `finance_payment_plans` - ุฎุทุท ุงูุฏูุน
- `finance_plan_installments` - ุงูุฃูุณุงุท

### 5. ุงูููุฒุงููุงุช ุงูุชูุฏูุฑูุฉ (Budgets)
- `finance_budgets` - ุงูููุฒุงููุงุช
- `finance_budget_lines` - ุณุทูุฑ ุงูููุฒุงููุฉ (ุดูุฑู)
- `finance_budget_variances` - ุชุญููู ุงูุงูุญุฑุงูุงุช

### 6. ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช
- `finance_cashflow` - ุงูุชุฏููุงุช ุงูููุฏูุฉ
- `finance_ai_forecasts` - ุชููุนุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- `finance_ai_risk_scores` - ุชูููู ุงููุฎุงุทุฑ

### 7. ุงูุฃุตูู ุงูุซุงุจุชุฉ (Fixed Assets)
- `finance_fixed_assets` - ุงูุฃุตูู
- `finance_asset_depreciation` - ุงูุฅููุงู

### 8. ุงูููุฑุฏูู ูุงููุตุฑููุงุช
- `finance_vendors` - ุงูููุฑุฏูู
- `finance_expenses` - ุงููุตุฑููุงุช

## ๐ API Endpoints

### ุงูุญุณุงุจุงุช (Chart of Accounts)

```
GET    /finance/accounts              # ุฌููุน ุงูุญุณุงุจุงุช
GET    /finance/accounts/:id          # ุญุณุงุจ ูุญุฏุฏ ูุน ุงูุฑุตูุฏ
POST   /finance/accounts              # ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
```

### ุงููููุฏ ุงููุญุงุณุจูุฉ

```
GET    /finance/journal-entries       # ุฌููุน ุงููููุฏ
GET    /finance/journal-entries/:id   # ููุฏ ูุญุฏุฏ ูุน ุงูุณุทูุฑ
POST   /finance/journal-entries       # ุฅูุดุงุก ููุฏ ุฌุฏูุฏ
POST   /finance/journal-entries/:id/post  # ุชุฑุญูู ุงูููุฏ
```

### ุงูููุงุชูุฑ

```
GET    /finance/invoices              # ุฌููุน ุงูููุงุชูุฑ
GET    /finance/invoices/:id          # ูุงุชูุฑุฉ ูุญุฏุฏุฉ
POST   /finance/invoices              # ุฅูุดุงุก ูุงุชูุฑุฉ (+ ููุฏ ุขูู)
```

### ุงููุฏููุนุงุช

```
GET    /finance/payments              # ุฌููุน ุงููุฏููุนุงุช
POST   /finance/payments              # ุชุณุฌูู ุฏูุนุฉ (+ ููุฏ ุขูู)
```

### ุงูุนููุงุก

```
GET    /finance/customers             # ุฌููุน ุงูุนููุงุก
POST   /finance/customers             # ุฅูุดุงุก ุนููู ุฌุฏูุฏ
```

## ๐งช ุงูุงุฎุชุจุงุฑ

```bash
# ุชุดุบูู ุงูุฎุงุฏู
npm start

# ูู terminal ุขุฎุฑ - ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
node finance/test-finance-api.js
```

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅูุดุงุก ุนููู ุฌุฏูุฏ

```javascript
POST /finance/customers
{
  "customer_name_ar": "ุดุฑูุฉ ุงูุงุฎุชุจุงุฑ",
  "customer_type": "COMPANY",
  "email": "test@company.com",
  "phone": "0112345678",
  "tax_number": "300000000000003",
  "credit_limit": 50000,
  "entity_type": "HQ",
  "entity_id": "HQ001"
}
```

### 2. ุฅูุดุงุก ูุงุชูุฑุฉ

```javascript
POST /finance/invoices
{
  "customer_id": 1,
  "invoice_date": "2026-01-26",
  "due_date": "2026-02-25",
  "entity_type": "HQ",
  "entity_id": "HQ001",
  "lines": [
    {
      "item_name": "ุจุฑูุงูุฌ ุชุฏุฑูุจู",
      "quantity": 1,
      "unit_price": 5000,
      "tax_percentage": 15
    }
  ]
}
```

**ุงููุธุงู ุณูููู ุชููุงุฆูุงู ุจู:**
- ุญุณุงุจ ุงูุฅุฌูุงููุงุช ูุงูุถุฑุงุฆุจ
- ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุขูู
- ุชุญุฏูุซ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช

### 3. ุชุณุฌูู ุฏูุนุฉ

```javascript
POST /finance/payments
{
  "customer_id": 1,
  "payment_date": "2026-01-26",
  "payment_amount": 5000,
  "payment_method": "BANK_TRANSFER",
  "allocations": [
    {
      "invoice_id": 1,
      "allocated_amount": 5000
    }
  ]
}
```

**ุงููุธุงู ุณูููู ุชููุงุฆูุงู ุจู:**
- ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ
- ุฅูุดุงุก ููุฏ ูุญุงุณุจู
- ุชุญุฏูุซ ุงูุฃุฑุตุฏุฉ

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ุงููููุฏ ุงููุญุงุณุจูุฉ ุงูุขููุฉ
- ูู ูุงุชูุฑุฉ ุชูุดุฆ ููุฏ ูุญุงุณุจู ุขูู
- ูู ุฏูุนุฉ ุชูุดุฆ ููุฏ ูุญุงุณุจู ุขูู
- ุถูุงู ุงูุฏูุฉ ูุงูุณุฑุนุฉ

### โ ุนุฒู ุงูุจูุงูุงุช (Data Isolation)
- ูู ููุงู ูุฑู ุจูุงูุงุชู ููุท
- HQ ูุฑู ูู ุดูุก
- Branches, Incubators, Platforms ููุง ุญุฏูุฏ ูุงุถุญุฉ

### โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุฅุฌูุงูู ุงููุฏูู = ุฅุฌูุงูู ุงูุฏุงุฆู
- ูุง ูููู ุชุฑุญูู ููุฏ ุบูุฑ ูุชูุงุฒู
- ุงูุชุญูู ูู ุงูุฃุฑุตุฏุฉ ูุงูุญุฏูุฏ ุงูุงุฆุชูุงููุฉ

### โ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (ูุฑูุจุงู)
- ุชููุน ุงูุชุฏููุงุช ุงูููุฏูุฉ
- ุชูููู ูุฎุงุทุฑ ุงูุนููุงุก
- ุงูุชุฑุงุญ ุฎุทุท ุงูุฏูุน
- ุชุญููู ุงูุงูุญุฑุงูุงุช

## ๐ Views (ุงูุชูุงุฑูุฑ ุงูุฌุงูุฒุฉ)

```sql
-- ุฃุฑุตุฏุฉ ุงูุญุณุงุจุงุช
SELECT * FROM finance_account_balances;

-- ุงูุฐูู ุงููุฏููุฉ ุญุณุจ ุงูุนูุฑ
SELECT * FROM finance_ar_aging;

-- ููุฎุต ุงูุชุฏููุงุช ุงูููุฏูุฉ
SELECT * FROM finance_cashflow_summary;
```

## ๐ ุงูุฃูุงู

- ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ (Audit Trail)
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ูุณุชูู ุงูููุงู
- ูุง ูููู ุญุฐู ุงููููุฏ ุงููุฑุญูุฉ
- ุงูุชุนุฏููุงุช ุชุชู ุนุจุฑ ุฅุดุนุงุฑุงุช ูุฏูู/ุฏุงุฆู

## ๐ ุงูุฎุทูุงุช ุงููุงุฏูุฉ

1. โ **ุงููุฑุญูุฉ 1** (ููุชููุฉ):
   - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
   - APIs ููุนูููุงุช ุงูุฃุณุงุณูุฉ
   - ุงููููุฏ ุงูุขููุฉ

2. ๐ **ุงููุฑุญูุฉ 2** (ุฌุงุฑูุฉ):
   - ูุธุงู ุงูุชูุงุฑูุฑ ุงููุงููุฉ
   - Dashboard ูุงูู
   - ุชูุงุฑูุฑ AR Aging

3. ๐ **ุงููุฑุญูุฉ 3** (ูุงุฏูุฉ):
   - ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุงูู
   - ุชููุนุงุช ุงูุชุฏููุงุช
   - ุชูููู ุงููุฎุงุทุฑ

4. ๐ **ุงููุฑุญูุฉ 4** (ูุงุฏูุฉ):
   - ุงูููุฒุงููุงุช ุงูุชูุฏูุฑูุฉ
   - ุชุญููู ุงูุงูุญุฑุงูุงุช
   - ุงูุฅููุงู ุงูุดูุฑู/ุงูุณููู

## ๐ ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงููุณุงุนุฏุฉุ ูุฑุฌู ูุฑุงุฌุนุฉ:
- ุงููุซุงุฆู ุงููุงููุฉ ูู `/finance/docs`
- ููู ุงูุงุฎุชุจุงุฑ: `test-finance-api.js`
- ุฃูุซูุฉ SQL ูู: `database/init-finance-system.sql`

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** ูุธุงู ูุงููุด ERP
**ุงูุชุงุฑูุฎ:** 26 ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ:** 1.0.0
