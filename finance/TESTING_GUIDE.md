# ุฏููู ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุญุงุณุจู
# Finance System Testing Guide

## โ ุชู ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ - January 26, 2026

### ๐ฏ ูุง ุชู ุงุฎุชุจุงุฑู

#### 1. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
- ุฌููุน ุงูุฌุฏุงูู (20 ุฌุฏูู) ุชู ุฅูุดุงุคูุง ุจูุฌุงุญ
- ุดุฌุฑุฉ ุงูุญุณุงุจุงุช (61 ุญุณุงุจ) ุชู ุฅูุดุงุคูุง
- ุงูููุงุฑุณ ูุงูู Views ุชุนูู ุจุดูู ุตุญูุญ

#### 2. APIs ุงูุฃุณุงุณูุฉ โ

##### โ Chart of Accounts API
```bash
GET /finance/accounts
```
**ุงููุชูุฌุฉ:** 61 ุญุณุงุจ ุชู ุฅุฑุฌุงุนูุง ุจูุฌุงุญ

##### โ Create Customer API
```bash
POST /finance/customers
```
**ุงููุชูุฌุฉ:** ุชู ุฅูุดุงุก ุนููู ุจุฑูู CUST0001

##### โ Create Invoice API
```bash
POST /finance/invoices
```
**ุงููุชูุฌุฉ:** 
- ุชู ุฅูุดุงุก ูุงุชูุฑุฉ ุฑูู INV0001
- ุงููููุฉ ุงูุฅุฌูุงููุฉ: 8,625 ุฑูุงู
- ุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุขูู (JE0001)

##### โ Automatic Journal Entry
ุงูููุฏ ุงููุญุงุณุจู ุงูุขูู ูููุงุชูุฑุฉ:
```
ูุฏูู: ุงูุฐูู ุงููุฏููุฉ (1130)      8,625 ุฑูุงู
ุฏุงุฆู: ุงูุฅูุฑุงุฏุงุช (4100)          7,500 ุฑูุงู
ุฏุงุฆู: ุงูุถุฑุงุฆุจ ุงููุณุชุญูุฉ (2140)   1,125 ุฑูุงู
```

##### โ Create Payment API
```bash
POST /finance/payments
```
**ุงููุชูุฌุฉ:**
- ุชู ุชุณุฌูู ุฏูุนุฉ ุฑูู PAY0001
- ุงููุจูุบ: 5,000 ุฑูุงู
- ุงููุงุชูุฑุฉ ุชู ุชุญุฏูุซูุง ุชููุงุฆูุงู
- ุงูููุฏ ุงููุญุงุณุจู ุชู ุฅูุดุงุคู ุชููุงุฆูุงู

##### โ Invoice Update After Payment
ุงููุงุชูุฑุฉ ุจุนุฏ ุงูุฏูุนุฉ ุงูุฌุฒุฆูุฉ:
```
ุฅุฌูุงูู ุงููุงุชูุฑุฉ: 8,625 ุฑูุงู
ุงููุฏููุน: 5,000 ุฑูุงู
ุงููุชุจูู: 3,625 ุฑูุงู
ุงูุญุงูุฉ: PARTIAL
```

### ๐ฌ ููููุฉ ุงูุงุฎุชุจุงุฑ ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

#### 1. ุงุฎุชุจุงุฑ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช

**URL:**
```
GET http://localhost:3000/finance/accounts
```

**ุงูุชุญูู:**
- ูุฌุจ ุฃู ุชุฑู 61 ุญุณุงุจ
- ุงูุญุณุงุจุงุช ูุตููุฉ ุญุณุจ ุงูููุน (ASSET, LIABILITY, EQUITY, REVENUE, EXPENSE)
- ูู ุญุณุงุจ ูู ุฑูุฒ ูุฑูุฏ (1000, 1100, 1110, etc.)

**ูู ุงููุชุตูุญ:**
```
http://localhost:3000/finance/accounts?type=REVENUE
```
ูุฌุจ ุฃู ุชุฑู ุญุณุงุจุงุช ุงูุฅูุฑุงุฏุงุช ููุท (4100, 4200, 4300, 4400, 4500)

#### 2. ุงุฎุชุจุงุฑ ุฅูุดุงุก ุนููู

**ุงุณุชุฎุฏู Postman ุฃู curl:**
```bash
POST http://localhost:3000/finance/customers

Body (JSON):
{
  "customer_name_ar": "ุดุฑูุฉ ุงูุงุฎุชุจุงุฑ",
  "customer_type": "COMPANY",
  "email": "test@example.com",
  "phone": "0112345678",
  "tax_number": "300000000000003",
  "credit_limit": 50000,
  "entity_type": "HQ",
  "entity_id": "HQ001"
}
```

**ุงูุชุญูู:**
- ูุฌุจ ุฃู ุชุญุตู ุนูู response ูุน customer_code (CUST0001, CUST0002, ...)
- ุงูุนููู ูุฌุจ ุฃู ูููู active
- risk_level ูุฌุจ ุฃู ูููู LOW ุงูุชุฑุงุถูุงู

#### 3. ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุงุชูุฑุฉ

**Postman:**
```bash
POST http://localhost:3000/finance/invoices

Body (JSON):
{
  "customer_id": 1,
  "invoice_date": "2026-01-26",
  "due_date": "2026-02-25",
  "entity_type": "HQ",
  "entity_id": "HQ001",
  "branch_id": "HQ001",
  "lines": [
    {
      "item_name": "ุจุฑูุงูุฌ ุชุฏุฑูุจู",
      "quantity": 1,
      "unit_price": 5000,
      "tax_percentage": 15
    }
  ]
}
```

**ุงูุชุญูู:**
- invoice_number ูุฌุจ ุฃู ูููู INV0001, INV0002, ...
- total_amount = subtotal + tax_amount - discount_amount
- ูุฌุจ ุฃู ูููู ููุงู journal_entry_id ูู ุงูู response
- status ูุฌุจ ุฃู ูููู ISSUED
- payment_status ูุฌุจ ุฃู ูููู UNPAID

#### 4. ุงุฎุชุจุงุฑ ุงูููุฏ ุงููุญุงุณุจู

**ุงุญุตู ุนูู ุงูููุฏ:**
```bash
GET http://localhost:3000/finance/journal-entries/{journal_entry_id}
```

**ุงูุชุญูู:**
- ูุฌุจ ุฃู ูููู entry_type = AUTO
- status ูุฌุจ ุฃู ูููู POSTED
- ูุฌููุน debit_amount = ูุฌููุน credit_amount
- ูุฌุจ ุฃู ูููู ููุงู ุนูู ุงูุฃูู ุณุทุฑูู (ูุฏูู ูุฏุงุฆู)

#### 5. ุงุฎุชุจุงุฑ ุชุณุฌูู ุฏูุนุฉ

**Postman:**
```bash
POST http://localhost:3000/finance/payments

Body (JSON):
{
  "customer_id": 1,
  "payment_date": "2026-01-26",
  "payment_amount": 5000,
  "payment_method": "BANK_TRANSFER",
  "entity_type": "HQ",
  "entity_id": "HQ001",
  "allocations": [
    {
      "invoice_id": 1,
      "allocated_amount": 5000
    }
  ]
}
```

**ุงูุชุญูู:**
- payment_number ูุฌุจ ุฃู ูููู PAY0001, PAY0002, ...
- status ูุฌุจ ุฃู ูููู APPROVED
- ูุฌุจ ุฃู ูููู ููุงู journal_entry_id

**ุชุญูู ูู ุงููุงุชูุฑุฉ:**
```bash
GET http://localhost:3000/finance/invoices/1
```
- paid_amount ูุฌุจ ุฃู ูุฒุฏุงุฏ
- remaining_amount ูุฌุจ ุฃู ูููุต
- payment_status ูุฌุจ ุฃู ูุชุบูุฑ ุฅูู PARTIAL ุฃู PAID

#### 6. ุงุฎุชุจุงุฑ ุงูููุงุชุฑ ูุงูุงุณุชุนูุงูุงุช

**ุชุตููุฉ ุญุณุจ ุงูุชุงุฑูุฎ:**
```
GET /finance/invoices?from_date=2026-01-01&to_date=2026-01-31
```

**ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ:**
```
GET /finance/invoices?status=ISSUED
GET /finance/payments?status=APPROVED
```

**ุชุตููุฉ ุญุณุจ ุงูุนููู:**
```
GET /finance/invoices?customer_id=1
GET /finance/payments?customer_id=1
```

**ุงูุญุฏ ูู ุงููุชุงุฆุฌ:**
```
GET /finance/accounts?limit=10&offset=0
```

### ๐จ ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ ุงูููุตู ุจูุง

#### ุณููุงุฑูู 1: ุฏูุฑุฉ ูุงููุฉ ูู ุงููุงุชูุฑุฉ ุฅูู ุงูุฏูุน

1. ุฅูุดุงุก ุนููู ุฌุฏูุฏ
2. ุฅูุดุงุก ูุงุชูุฑุฉ ููุนููู
3. ุงูุชุญูู ูู ุงูููุฏ ุงููุญุงุณุจู
4. ุชุณุฌูู ุฏูุนุฉ ุฌุฒุฆูุฉ
5. ุงูุชุญูู ูู ุชุญุฏูุซ ุงููุงุชูุฑุฉ
6. ุชุณุฌูู ุงูุฏูุนุฉ ุงููุชุจููุฉ
7. ุงูุชุญูู ูู ุฃู ุงููุงุชูุฑุฉ ุฃุตุจุญุช PAID

#### ุณููุงุฑูู 2: ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุจูุงูุงุช

1. ูุญุงููุฉ ุฅูุดุงุก ูุงุชูุฑุฉ ุจุฏูู customer_id (ูุฌุจ ุฃู ููุดู)
2. ูุญุงููุฉ ุฅูุดุงุก ุฏูุนุฉ ุฃูุจุฑ ูู ุงููุชุจูู (ูุฌุจ ุฃู ููุดู)
3. ูุญุงููุฉ ุฅูุดุงุก ููุฏ ุบูุฑ ูุชูุงุฒู (ูุฌุจ ุฃู ููุดู)

#### ุณููุงุฑูู 3: ุงุฎุชุจุงุฑ ุงูููุงุชุฑ

1. ุฅูุดุงุก ุนุฏุฉ ุนููุงุก
2. ุฅูุดุงุก ุนุฏุฉ ููุงุชูุฑ
3. ุชุตููุฉ ุญุณุจ ุงูุชุงุฑูุฎ
4. ุชุตููุฉ ุญุณุจ ุงูุญุงูุฉ
5. ุชุตููุฉ ุญุณุจ ุงูุนููู

### ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุงูุฌุฏุงูู ุงูููุดุฃุฉ

1. โ finance_accounts (61 record)
2. โ finance_journal_entries
3. โ finance_journal_lines
4. โ finance_customers
5. โ finance_invoices
6. โ finance_invoice_lines
7. โ finance_payments
8. โ finance_payment_allocations
9. โ finance_payment_plans
10. โ finance_plan_installments
11. โ finance_budgets
12. โ finance_budget_lines
13. โ finance_budget_variances
14. โ finance_cashflow
15. โ finance_ai_forecasts
16. โ finance_ai_risk_scores
17. โ finance_fixed_assets
18. โ finance_asset_depreciation
19. โ finance_vendors
20. โ finance_expenses

### ๐ Views ุงูููุดุฃุฉ

1. โ finance_account_balances
2. โ finance_ar_aging
3. โ finance_cashflow_summary

### ๐ ุงูุฃูุงู

- โ Entity isolation ูู ุงูุงุณุชุนูุงูุงุช
- โ Audit trail (created_by, created_at, updated_at)
- โ Transaction safety (BEGIN/COMMIT/ROLLBACK)
- โ Data validation

### ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

#### ุงููุฑุญูุฉ 2 (ููุฏ ุงูุชุทููุฑ):
- [ ] Dashboard ูุงูู
- [ ] ุชูุงุฑูุฑ AR Aging
- [ ] ุชูุงุฑูุฑ ุงูุชุฏููุงุช ุงูููุฏูุฉ
- [ ] ูุงุฌูุฉ ูุณุชุฎุฏู (Frontend)

#### ุงููุฑุญูุฉ 3 (ูุงุฏูุฉ):
- [ ] ูุธุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- [ ] ุชููุนุงุช ุงูุชุฏููุงุช
- [ ] ุชูููู ูุฎุงุทุฑ ุงูุนููุงุก
- [ ] ุงูุชุฑุงุญ ุฎุทุท ุงูุฏูุน

#### ุงููุฑุญูุฉ 4 (ูุณุชูุจููุฉ):
- [ ] ุงูููุฒุงููุงุช ุงูุชูุฏูุฑูุฉ
- [ ] ุชุญููู ุงูุงูุญุฑุงูุงุช
- [ ] ุงูุฅููุงู ุงูุดูุฑู/ุงูุณููู
- [ ] ุชูุงุฑูุฑ ุงูููุงุฆู ุงููุงููุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 26 ููุงูุฑ 2026
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ (ุงููุฑุญูุฉ 1)
