<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ ูุธุงู ุงูููุงููุงุช ูุงูุตูุงุญูุงุช ูุงูุญูููุฉ - ูุธุงู ูุงููุด</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #f9fafb; color: #0f172a; }
        .card-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .stat-pill {
            border-radius: 999px;
            box-shadow: 0 20px 35px rgba(15, 23, 42, 0.18);
        }
        .stat-angled {
            border-radius: 32px 8px 32px 8px;
        }
        .stat-rounded {
            border-radius: 32px;
        }
        .stat-cut {
            border-radius: 8px 32px 8px 32px;
        }
        .table-scroll {
            max-height: 550px;
            overflow: auto;
        }
        .section-accent-violet { border-top: 5px solid #8b5cf6; }
        .section-accent-indigo { border-top: 5px solid #6366f1; }
        .section-accent-purple { border-top: 5px solid #a855f7; }
        .section-accent-fuchsia { border-top: 5px solid #d946ef; }
        .section-accent-rose { border-top: 5px solid #f43f5e; }
        .level-card {
            transition: all 0.3s;
        }
        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .badge {
            padding: 6px 14px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.75rem;
        }
    
        .card-gradient {
            background: linear-gradient(145deg, #ffffff, #f3f4f6);
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <div class="mb-8 text-slate-900">
            <h1 class="text-5xl font-bold mb-3">๐ ูุธุงู ุงูููุงููุงุช ูุงูุตูุงุญูุงุช ูุงูุญูููุฉ</h1>
            <p class="text-xl opacity-90">ูุธุงู ุงูููุงููุงุช - ุงูุตูุงุญูุงุช - ุญูููุฉ ุงูุจูุงูุงุช - ุญูููุฉ ุงูุชูุงุฑูุฑ - ุญูููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู - ุญูููุฉ ุงููุฎุงุทุฑ (ุงูุตูุญุฉ 41)</p>
        </div>

        <div class="mb-6 flex flex-wrap gap-3">
            <button onclick="refreshData()" class="bg-white text-purple-700 px-6 py-3 rounded-full font-bold hover:shadow-lg transition flex items-center gap-2">
                <i class="fas fa-rotate"></i>
                ุชุญุฏูุซ ุงูุจูุงูุงุช
            </button>
            <button onclick="downloadAllJSON()" class="bg-indigo-600 text-white px-6 py-3 rounded-full font-bold hover:shadow-lg transition flex items-center gap-2">
                <i class="fas fa-file-code"></i>
                ุชูุฒูู ุจูุงูุงุช ุดุงููุฉ
            </button>
            <button onclick="printReport()" class="bg-fuchsia-600 text-white px-6 py-3 rounded-full font-bold hover:shadow-lg transition flex items-center gap-2">
                <i class="fas fa-print"></i>
                ุทุจุงุนุฉ ุงูุชูุฑูุฑ
            </button>
        </div>

        <!-- Approval System Overview -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-violet">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-slate-800">โ ูุธุงู ุงูููุงููุงุช ูุงูุตูุงุญูุงุช</h2>
                <div class="text-sm text-slate-500">ูุตุฏุฑ ุงูุจูุงูุงุช: ุฌุฏุงูู ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-8">
                <div class="stat-pill bg-gradient-to-br from-violet-500 to-purple-600 text-slate-900 p-6">
                    <div class="flex justify-between mb-3"><span>ุฅุฌูุงูู ุงูุฃุฏูุงุฑ</span><i class="fas fa-user-tag text-3xl opacity-70"></i></div>
                    <div id="totalRoles" class="text-4xl font-bold"><div class="animate-pulse">...</div></div>
                </div>
                <div class="stat-angled bg-gradient-to-br from-indigo-500 to-blue-600 text-slate-900 p-6">
                    <div class="flex justify-between mb-3"><span>ุฅุฌูุงูู ุงูุตูุงุญูุงุช</span><i class="fas fa-shield-halved text-3xl opacity-70"></i></div>
                    <div id="totalPermissions" class="text-4xl font-bold"><div class="animate-pulse">...</div></div>
                </div>
                <div class="stat-rounded bg-gradient-to-br from-fuchsia-500 to-pink-600 text-slate-900 p-6">
                    <div class="flex justify-between mb-3"><span>ุงููุณุชููุงุช ุงููุดุทุฉ</span><i class="fas fa-layer-group text-3xl opacity-70"></i></div>
                    <div id="activeLevels" class="text-4xl font-bold"><div class="animate-pulse">...</div></div>
                </div>
                <div class="stat-cut bg-gradient-to-br from-rose-500 to-red-600 text-slate-900 p-6">
                    <div class="flex justify-between mb-3"><span>ุงููุณุชุฎุฏููู ุงููุดุทูู</span><i class="fas fa-users text-3xl opacity-70"></i></div>
                    <div id="activeUsers" class="text-4xl font-bold"><div class="animate-pulse">...</div></div>
                </div>
            </div>
        </div>

        <!-- Approval Levels -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-indigo">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">๐ ูุณุชููุงุช ุงูููุงููุงุช</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Level 1 -->
                <div class="level-card bg-gradient-to-br from-emerald-50 to-teal-50 rounded-2xl p-6 border-r-8 border-emerald-500">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-emerald-500 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold">1</div>
                        <h3 class="text-xl font-bold text-slate-800">ูุญุงุณุจ</h3>
                    </div>
                    <div class="space-y-2 text-sm text-slate-700">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-emerald-600"></i>
                            <span>ุฅุฏุฎุงู ูููุฏ</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-emerald-600"></i>
                            <span>ุชุณุฌูู ููุงุชูุฑ</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-emerald-600"></i>
                            <span>ุชุณุฌูู ูุตุฑููุงุช</span>
                        </div>
                    </div>
                </div>

                <!-- Level 2 -->
                <div class="level-card bg-gradient-to-br from-sky-50 to-blue-50 rounded-2xl p-6 border-r-8 border-sky-500">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-sky-500 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold">2</div>
                        <h3 class="text-xl font-bold text-slate-800">ูุฏูุฑ ูุงูู</h3>
                    </div>
                    <div class="space-y-2 text-sm text-slate-700">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-sky-600"></i>
                            <span>ุงุนุชูุงุฏ ุงูููุงุชูุฑ</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-sky-600"></i>
                            <span>ุงุนุชูุงุฏ ุงููุตุฑููุงุช</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-sky-600"></i>
                            <span>ุงุนุชูุงุฏ ุฎุทุท ุงูุฏูุน</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-sky-600"></i>
                            <span>ุชุนุฏูู ูููุฏ ูุจู ุงูุฅููุงู</span>
                        </div>
                    </div>
                </div>

                <!-- Level 3 -->
                <div class="level-card bg-gradient-to-br from-violet-50 to-purple-50 rounded-2xl p-6 border-r-8 border-violet-500">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-violet-500 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold">3</div>
                        <h3 class="text-xl font-bold text-slate-800">ูุฏูุฑ ูุงูู ุชูููุฐู</h3>
                    </div>
                    <div class="space-y-2 text-sm text-slate-700">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-violet-600"></i>
                            <span>ุงุนุชูุงุฏ ุงูููุฒุงููุงุช</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-violet-600"></i>
                            <span>ุงุนุชูุงุฏ ุงููุตุฑููุงุช ุงููุจูุฑุฉ</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-violet-600"></i>
                            <span>ุชุนุฏูู ุงููููุฏ ุจุนุฏ ุงูุฅููุงู</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-violet-600"></i>
                            <span>ุงุนุชูุงุฏ ุณูุงุณุงุช ูุงููุฉ</span>
                        </div>
                    </div>
                </div>

                <!-- Level 4 -->
                <div class="level-card bg-gradient-to-br from-rose-50 to-pink-50 rounded-2xl p-6 border-r-8 border-rose-500">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="bg-rose-500 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold">4</div>
                        <h3 class="text-xl font-bold text-slate-800">ูุฌูุณ ุงูุฅุฏุงุฑุฉ</h3>
                    </div>
                    <div class="space-y-2 text-sm text-slate-700">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-rose-600"></i>
                            <span>ุงุนุชูุงุฏ ุงูููุฒุงููุฉ ุงูุณูููุฉ</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-rose-600"></i>
                            <span>ุงุนุชูุงุฏ ุงููุดุงุฑูุน ุงููุจุฑู</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-rose-600"></i>
                            <span>ุงุนุชูุงุฏ ุงูุชูุณุน ุงููุงูู</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Financial Data Governance -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-purple">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">๐ก๏ธ ุญูููุฉ ุงูุจูุงูุงุช ุงููุงููุฉ</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div class="bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-6 border-r-4 border-purple-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-file-shield text-purple-600"></i>
                        ุงูุณูุงุณุงุช
                    </h3>
                    <div class="space-y-3 text-sm text-slate-700">
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-calendar text-purple-600 mt-1"></i>
                            <span>ูู ุนูููุฉ ูุงููุฉ ูุฌุจ ุฃู ุชุญุชูู ุนูู: ุชุงุฑูุฎ - ูุณุชุฎุฏู - ูุตุฏุฑ - ูุฑููุงุช</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-ban text-red-600 mt-1"></i>
                            <span>ูุง ููุณูุญ ุจุญุฐู ุฃู ุณุฌู ูุงูู</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-edit text-blue-600 mt-1"></i>
                            <span>ุงูุชุนุฏูู ูุชู ุนุจุฑ: ุฅุดุนุงุฑ ุฏุงุฆู/ูุฏูู - ููุฏ ุนูุณู</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl p-6 border-r-4 border-indigo-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-magnifying-glass-chart text-indigo-600"></i>
                        ุงูุชุฏููู
                    </h3>
                    <div class="space-y-3 text-sm text-slate-700">
                        <div class="bg-white p-3 rounded-xl flex items-center justify-between">
                            <span>ุชุฏููู ุดูุฑู ุฏุงุฎูู</span>
                            <span class="badge bg-green-100 text-green-700">ุดูุฑู</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-center justify-between">
                            <span>ุชุฏููู ุฑุจุน ุณููู</span>
                            <span class="badge bg-blue-100 text-blue-700">ุฑุจุน ุณููู</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-center justify-between">
                            <span>ุชุฏููู ุณููู ุฎุงุฑุฌู</span>
                            <span class="badge bg-purple-100 text-purple-700">ุณููู</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reporting Governance -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-fuchsia">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">๐ ุญูููุฉ ุงูุชูุงุฑูุฑ ุงููุงููุฉ</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-gradient-to-br from-fuchsia-50 to-pink-50 rounded-2xl p-6 border-r-4 border-fuchsia-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-line text-fuchsia-600"></i>
                        ุฃููุงุน ุงูุชูุงุฑูุฑ
                    </h3>
                    <div class="space-y-3 text-sm">
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between hover:shadow-md transition">
                            <span class="font-semibold text-slate-700">ุชูุงุฑูุฑ ุชุดุบูููุฉ</span>
                            <span class="badge bg-emerald-100 text-emerald-700">ูููู</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between hover:shadow-md transition">
                            <span class="font-semibold text-slate-700">ุชูุงุฑูุฑ ุชูุชูููุฉ</span>
                            <span class="badge bg-sky-100 text-sky-700">ุดูุฑู</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between hover:shadow-md transition">
                            <span class="font-semibold text-slate-700">ุชูุงุฑูุฑ ุงุณุชุฑุงุชูุฌูุฉ</span>
                            <span class="badge bg-violet-100 text-violet-700">ุณููู</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-rose-50 to-red-50 rounded-2xl p-6 border-r-4 border-rose-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-list-check text-rose-600"></i>
                        ุณูุงุณุงุช ุงูุชูุงุฑูุฑ
                    </h3>
                    <div class="space-y-3 text-sm text-slate-700">
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-robot text-blue-600 mt-1"></i>
                            <span>ูู ุชูุฑูุฑ ูุฌุจ ุฃู ูููู ุขูู</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-equals text-green-600 mt-1"></i>
                            <span>ูู ุชูุฑูุฑ ูุฌุจ ุฃู ูููู ููุญุฏ</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-check-double text-purple-600 mt-1"></i>
                            <span>ูู ุชูุฑูุฑ ูุฌุจ ุฃู ูููู ูุงุจู ููุชุฏููู</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl flex items-start gap-2">
                            <i class="fas fa-database text-orange-600 mt-1"></i>
                            <span>ูู ุชูุฑูุฑ ูุญุชูู ุนูู ูุตุฏุฑ ุงูุจูุงูุงุช</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Governance -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-indigo">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">๐ค ุญูููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุงูู</h2>
            
            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-r-4 border-indigo-500">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <i class="fas fa-brain text-indigo-600"></i>
                    ุงูุณูุงุณุงุช
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-700">
                    <div class="bg-white p-4 rounded-xl flex items-start gap-3">
                        <i class="fas fa-lightbulb text-amber-600 text-xl mt-1"></i>
                        <div>
                            <div class="font-bold mb-1">ุชูุตูุงุช ููุท</div>
                            <div>ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุฏู ุชูุตูุงุชุ ูุง ูุฑุงุฑุงุช ููุงุฆูุฉ</div>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-start gap-3">
                        <i class="fas fa-glasses text-blue-600 text-xl mt-1"></i>
                        <div>
                            <div class="font-bold mb-1">ูุงุจููุฉ ุงูุชูุณูุฑ</div>
                            <div>ูู ุชูุตูุฉ ูุฌุจ ุฃู ุชููู ูุงุจูุฉ ููุชูุณูุฑ</div>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-start gap-3">
                        <i class="fas fa-user-check text-green-600 text-xl mt-1"></i>
                        <div>
                            <div class="font-bold mb-1">ููุงููุฉ ุจุดุฑูุฉ</div>
                            <div>ูุง ุฅุฌุฑุงุก ูุงูู ุขูู ุฏูู ููุงููุฉ ุจุดุฑูุฉ</div>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-start gap-3">
                        <i class="fas fa-broom text-purple-600 text-xl mt-1"></i>
                        <div>
                            <div class="font-bold mb-1">ุจูุงูุงุช ูุธููุฉ</div>
                            <div>ุชุฏุฑูุจ ุงูููุงุฐุฌ ุนูู ุจูุงูุงุช ูุธููุฉ ููุท</div>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-start gap-3 md:col-span-2">
                        <i class="fas fa-calendar-check text-rose-600 text-xl mt-1"></i>
                        <div>
                            <div class="font-bold mb-1">ูุฑุงุฌุนุฉ ุฏูุฑูุฉ</div>
                            <div>ูุฑุงุฌุนุฉ ุฃุฏุงุก ุงููููุฐุฌ ูู 3 ุฃุดูุฑ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Governance -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-rose">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">โ๏ธ ุญูููุฉ ุงููุฎุงุทุฑ ุงููุงููุฉ</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border-r-4 border-amber-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-simple text-amber-600"></i>
                        ุชุตููู ุงููุฎุงุทุฑ
                    </h3>
                    <div class="space-y-3">
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between border-r-4 border-green-500">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                                    <i class="fas fa-circle-check text-green-600"></i>
                                </div>
                                <span class="font-bold text-slate-700">ููุฎูุถ</span>
                            </div>
                            <span class="badge bg-green-100 text-green-700">ุขูู</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between border-r-4 border-yellow-500">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center">
                                    <i class="fas fa-circle-exclamation text-yellow-600"></i>
                                </div>
                                <span class="font-bold text-slate-700">ูุชูุณุท</span>
                            </div>
                            <span class="badge bg-yellow-100 text-yellow-700">ูุฑุงูุจุฉ</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between border-r-4 border-orange-500">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center">
                                    <i class="fas fa-triangle-exclamation text-orange-600"></i>
                                </div>
                                <span class="font-bold text-slate-700">ูุฑุชูุน</span>
                            </div>
                            <span class="badge bg-orange-100 text-orange-700">ุชุญุฐูุฑ</span>
                        </div>
                        <div class="bg-white p-4 rounded-xl flex items-center justify-between border-r-4 border-red-500">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center">
                                    <i class="fas fa-circle-xmark text-red-600"></i>
                                </div>
                                <span class="font-bold text-slate-700">ุญุฑุฌ</span>
                            </div>
                            <span class="badge bg-red-100 text-red-700">ุนุงุฌู</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-red-50 to-rose-50 rounded-2xl p-6 border-r-4 border-red-500">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-gears text-red-600"></i>
                        ุฅุฌุฑุงุกุงุช ุงูุชุนุงูู
                    </h3>
                    <div class="space-y-3 text-sm text-slate-700">
                        <div class="bg-white p-4 rounded-xl">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-bold text-green-700">ููุฎูุถ</span>
                                <i class="fas fa-bell text-green-600"></i>
                            </div>
                            <div>ุชุฐููุฑ ููุนููู ููุท</div>
                        </div>
                        <div class="bg-white p-4 rounded-xl">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-bold text-yellow-700">ูุชูุณุท</span>
                                <i class="fas fa-calendar-days text-yellow-600"></i>
                            </div>
                            <div>ุฅูุดุงุก ุฎุทุฉ ุฏูุน ููุนููู</div>
                        </div>
                        <div class="bg-white p-4 rounded-xl">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-bold text-orange-700">ูุฑุชูุน</span>
                                <i class="fas fa-user-tie text-orange-600"></i>
                            </div>
                            <div>ุชุฏุฎู ุฅุฏุงุฑู ูุจุงุดุฑ</div>
                        </div>
                        <div class="bg-white p-4 rounded-xl">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-bold text-red-700">ุญุฑุฌ</span>
                                <i class="fas fa-hand text-red-600"></i>
                            </div>
                            <div>ุฅููุงู ุฎุฏูุงุช + ุฎุทุฉ ุฏูุน ุฎุงุตุฉ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Roles Table -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 mb-8 section-accent-violet">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-slate-800">๐ ุฌุฏูู ุงูุฃุฏูุงุฑ</h3>
                <span id="rolesCount" class="text-sm text-slate-500"></span>
            </div>
            <div class="table-scroll">
                <table class="w-full text-xs">
                    <thead class="bg-violet-50 text-violet-700 sticky top-0">
                        <tr>
                            <th class="px-4 py-3 text-right">ุฑูู ุงูุฏูุฑ</th>
                            <th class="px-4 py-3 text-right">ุงุณู ุงูุฏูุฑ</th>
                            <th class="px-4 py-3 text-right">ุงููุตู</th>
                            <th class="px-4 py-3 text-right">ูุณุชูู ุงูุตูุงุญูุฉ</th>
                            <th class="px-4 py-3 text-right">ุงูุญุงูุฉ</th>
                            <th class="px-4 py-3 text-right">ุชุงุฑูุฎ ุงูุฅูุดุงุก</th>
                        </tr>
                    </thead>
                    <tbody id="rolesTable" class="divide-y divide-slate-100">
                        <tr>
                            <td colspan="6" class="px-4 py-12 text-center text-slate-500">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Permissions Table -->
        <div class="card-glass rounded-3xl shadow-2xl p-6 section-accent-indigo">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold text-slate-800">๐ ุฌุฏูู ุงูุตูุงุญูุงุช</h3>
                <span id="permissionsCount" class="text-sm text-slate-500"></span>
            </div>
            <div class="table-scroll">
                <table class="w-full text-xs">
                    <thead class="bg-indigo-50 text-indigo-700 sticky top-0">
                        <tr>
                            <th class="px-4 py-3 text-right">ุฑูู ุงูุตูุงุญูุฉ</th>
                            <th class="px-4 py-3 text-right">ุฑูู ุงูุฏูุฑ</th>
                            <th class="px-4 py-3 text-right">ุงุณู ุงูุตูุงุญูุฉ</th>
                            <th class="px-4 py-3 text-right">ุงูููุฑุฏ</th>
                            <th class="px-4 py-3 text-right">ุงูุฅุฌุฑุงุก</th>
                            <th class="px-4 py-3 text-right">ุงูุดุฑูุท</th>
                            <th class="px-4 py-3 text-right">ุงูุญุงูุฉ</th>
                            <th class="px-4 py-3 text-right">ุชุงุฑูุฎ ุงูุฅูุดุงุก</th>
                        </tr>
                    </thead>
                    <tbody id="permissionsTable" class="divide-y divide-slate-100">
                        <tr>
                            <td colspan="8" class="px-4 py-12 text-center text-slate-500">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = window.location.origin;
        
        let roles = [];
        let permissions = [];

        async function loadData() {
            try {
                const [rolesRes, statsRes] = await Promise.all([
                    fetch(`${API_BASE}/api/permissions/roles`),
                    fetch(`${API_BASE}/api/permissions/stats`)
                ]);

                const [rolesData, statsData] = await Promise.all([
                    rolesRes.json(),
                    statsRes.json()
                ]);

                roles = rolesData.roles || [];
                permissions = statsData.stats || {};

                renderStats();
                renderTables();
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช:', error);
                renderStats();
                renderTables();
            }
        }

        function renderStats() {
            document.getElementById('totalRoles').textContent = roles.length || 0;
            document.getElementById('totalPermissions').textContent = permissions.total_permissions || 0;
            
            const uniqueLevels = new Set(roles.map(r => r.hierarchy_level).filter(l => l !== null && l !== undefined));
            document.getElementById('activeLevels').textContent = uniqueLevels.size || 4;
            
            document.getElementById('activeUsers').textContent = 'โ';
        }

        function renderTables() {
            const rolesRows = roles.map(r => `
                <tr class="hover:bg-violet-50 transition">
                    <td class="px-4 py-3">${sanitizeText(r.id)}</td>
                    <td class="px-4 py-3 font-semibold">${sanitizeText(r.name_ar || r.job_title_ar)}</td>
                    <td class="px-4 py-3">${sanitizeText(r.description || r.approval_notes_ar)}</td>
                    <td class="px-4 py-3">
                        <span class="badge ${getLevelColor(r.hierarchy_level)}">
                            ${translateLevel(r.hierarchy_level)}
                        </span>
                    </td>
                    <td class="px-4 py-3">
                        <span class="badge ${getStatusColor(r.is_active)}">
                            ${translateStatus(r.is_active)}
                        </span>
                    </td>
                    <td class="px-4 py-3">${formatDateTime(r.created_at)}</td>
                </tr>
            `).join('');
            
            document.getElementById('rolesTable').innerHTML = rolesRows || `<tr><td colspan="6" class="px-4 py-12 text-center text-slate-500">ูุง ุชูุฌุฏ ุจูุงูุงุช</td></tr>`;
            document.getElementById('rolesCount').textContent = `ุนุฏุฏ ุงูุตููู: ${roles.length}`;

            // Since we don't have individual permissions data, show summary
            const permissionsRows = `
                <tr class="hover:bg-indigo-50 transition">
                    <td colspan="8" class="px-4 py-8 text-center text-slate-600">
                        ุฅุฌูุงูู ุงูุตูุงุญูุงุช: ${permissions.total_permissions || 0}<br>
                        ุนุฏุฏ ุงูุฃูุธูุฉ: ${permissions.total_systems || 0}<br>
                        ูุณุชููุงุช ุงูุตูุงุญูุงุช: ${permissions.total_permission_levels || 0}
                    </td>
                </tr>
            `;
            
            document.getElementById('permissionsTable').innerHTML = permissionsRows;
            document.getElementById('permissionsCount').textContent = `ุฅุฌูุงูู: ${permissions.total_permissions || 0}`;
        }

        function getLevelColor(level) {
            const colorMap = {
                1: 'bg-emerald-100 text-emerald-700',
                2: 'bg-sky-100 text-sky-700',
                3: 'bg-violet-100 text-violet-700',
                4: 'bg-rose-100 text-rose-700'
            };
            return colorMap[level] || 'bg-slate-100 text-slate-700';
        }

        function translateLevel(level) {
            const levelMap = {
                1: 'ูุญุงุณุจ',
                2: 'ูุฏูุฑ ูุงูู',
                3: 'ูุฏูุฑ ูุงูู ุชูููุฐู',
                4: 'ูุฌูุณ ุฅุฏุงุฑุฉ'
            };
            return levelMap[level] || `ูุณุชูู ${level}`;
        }

        function getStatusColor(isActive) {
            return isActive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700';
        }

        function translateStatus(isActive) {
            return isActive ? 'ูุดุท' : 'ุบูุฑ ูุดุท';
        }

        function getActionColor(action) {
            const colorMap = {
                create: 'bg-green-100 text-green-700',
                read: 'bg-blue-100 text-blue-700',
                update: 'bg-amber-100 text-amber-700',
                delete: 'bg-red-100 text-red-700',
                approve: 'bg-purple-100 text-purple-700'
            };
            return colorMap[String(action || '').toLowerCase()] || 'bg-slate-100 text-slate-700';
        }

        function translateAction(action) {
            const actionMap = {
                create: 'ุฅูุดุงุก',
                read: 'ูุฑุงุกุฉ',
                update: 'ุชุญุฏูุซ',
                delete: 'ุญุฐู',
                approve: 'ุงุนุชูุงุฏ'
            };
            return actionMap[String(action || '').toLowerCase()] || sanitizeText(action);
        }

        function formatDateTime(value) {
            if (!value) return 'โ';
            return new Date(value).toLocaleString('ar-SA');
        }

        function truncate(value) {
            if (!value || value === 'โ') return 'โ';
            return value.length > 100 ? value.slice(0, 100) + '...' : value;
        }

        function sanitizeText(value) {
            if (value === null || value === undefined) return 'โ';
            const text = typeof value === 'string' ? value : JSON.stringify(value);
            const cleaned = text.replace(/[A-Za-z]+/g, '').replace(/\s{2,}/g, ' ').trim();
            return cleaned || 'โ';
        }

        function downloadAllJSON() {
            const payload = {
                roles,
                permissions,
                governance: {
                    data_governance: {
                        policies: [
                            'ูู ุนูููุฉ ูุงููุฉ ูุฌุจ ุฃู ุชุญุชูู ุนูู: ุชุงุฑูุฎ - ูุณุชุฎุฏู - ูุตุฏุฑ - ูุฑููุงุช',
                            'ูุง ููุณูุญ ุจุญุฐู ุฃู ุณุฌู ูุงูู',
                            'ุงูุชุนุฏูู ูุชู ุนุจุฑ: ุฅุดุนุงุฑ ุฏุงุฆู/ูุฏูู - ููุฏ ุนูุณู'
                        ],
                        audit: ['ุชุฏููู ุดูุฑู ุฏุงุฎูู', 'ุชุฏููู ุฑุจุน ุณููู', 'ุชุฏููู ุณููู ุฎุงุฑุฌู']
                    },
                    reporting_governance: {
                        types: ['ุชุดุบูููุฉ', 'ุชูุชูููุฉ', 'ุงุณุชุฑุงุชูุฌูุฉ'],
                        policies: ['ุขูู', 'ููุญุฏ', 'ูุงุจู ููุชุฏููู', 'ูุญุชูู ุนูู ูุตุฏุฑ ุงูุจูุงูุงุช']
                    },
                    ai_governance: {
                        policies: [
                            'ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุฏู ุชูุตูุงุชุ ูุง ูุฑุงุฑุงุช ููุงุฆูุฉ',
                            'ูู ุชูุตูุฉ ูุฌุจ ุฃู ุชููู ูุงุจูุฉ ููุชูุณูุฑ',
                            'ูุง ุฅุฌุฑุงุก ูุงูู ุขูู ุฏูู ููุงููุฉ ุจุดุฑูุฉ',
                            'ุชุฏุฑูุจ ุงูููุงุฐุฌ ุนูู ุจูุงูุงุช ูุธููุฉ ููุท',
                            'ูุฑุงุฌุนุฉ ุฃุฏุงุก ุงููููุฐุฌ ูู 3 ุฃุดูุฑ'
                        ]
                    },
                    risk_governance: {
                        classifications: ['ููุฎูุถ', 'ูุชูุณุท', 'ูุฑุชูุน', 'ุญุฑุฌ'],
                        actions: {
                            low: 'ุชุฐููุฑ',
                            medium: 'ุฎุทุฉ ุฏูุน',
                            high: 'ุชุฏุฎู ุฅุฏุงุฑู',
                            critical: 'ุฅููุงู ุฎุฏูุงุช + ุฎุทุฉ ุฏูุน ุฎุงุตุฉ'
                        }
                    }
                }
            };
            downloadBlob(JSON.stringify(payload, null, 2), 'ุงูููุงููุงุช-ูุงูุตูุงุญูุงุช-ูุงูุญูููุฉ.json', 'application/json');
        }

        function downloadBlob(content, filename, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.click();
            URL.revokeObjectURL(url);
        }

        function printReport() {
            window.print();
        }

        function refreshData() {
            loadData();
        }

        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
